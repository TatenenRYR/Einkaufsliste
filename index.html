<!DOCTYPE html><html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meine Einkaufsliste</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f4f8;
      color: #333;
      display: flex;
      justify-content: center;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    body.dark {
      background: #1e1e1e;
      color: #ccc;
    }
    .container {
      width: 100%; max-width: 600px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: background 0.3s;
    }
    body.dark .container {
      background: #2c2c2c;
    }
    header {
      background: #2E8B57;
      color: #fff;
      padding: 20px;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .controls, .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 20px;
    }
    .controls input, .controls select, .controls button, .filters select {
      flex: 1 1 45%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    .controls button, .footer button {
      background: #2E8B57;
      color: #fff;
      cursor: pointer;
    }
    .controls button:hover, .footer button:hover {
      background: #276c47;
    }
    .filters select {
      flex: 1;
    }
    #list {
      padding: 0 20px 20px;
    }
    .item {
      background: #fafafa;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    body.dark .item {
      background: #3a3a3a;
    }
    .item .info {
      display: flex;
      align-items: center;
      gap: 12px;
      flex: 1;
      cursor: pointer;
    }
    .item .item-name.checked {
      text-decoration: line-through;
      color: #888;
    }
    .item .actions button {
      background: transparent;
      border: none;
      font-size: 1.2rem;
      color: #2E8B57;
      cursor: pointer;
    }
    .footer {
      padding: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .footer button.clear {
      background: #e74c3c;
    }
    .footer button.export {
      background: #3498db;
    }
    .footer button.darkmode {
      background: #444;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>Meine Einkaufsliste</header>
    <div class="controls">
      <input type="text" id="itemInput" placeholder="Produkt eingeben..." />
      <input type="text" id="categoryInput" placeholder="Kategorie... (optional)" />
      <button onclick="addItem()">Hinzufügen</button>
    </div>
    <div class="filters">
      <select id="filterFav" onchange="renderList()">
        <option value="alle">Alle</option>
        <option value="favoriten">Nur Favoriten</option>
      </select>
      <select id="filterCategory" onchange="renderList()">
        <option value="alle">Alle Kategorien</option>
      </select>
    </div>
    <div id="list"></div>
    <div class="footer">
      <button class="share" onclick="shareList()">Teilen</button>
      <button class="clear" onclick="clearList()">Löschen</button>
      <button class="darkmode" onclick="toggleDarkMode()">Dark Mode</button>
      <button class="export" onclick="exportList()">Exportieren</button>
    </div>
  </div>
<script>
let list = JSON.parse(localStorage.getItem('einkaufsliste')) || [];
let favs = JSON.parse(localStorage.getItem('favoriten')) || [];
let categories = new Set();function save() { localStorage.setItem('einkaufsliste', JSON.stringify(list)); localStorage.setItem('favoriten', JSON.stringify(favs)); }

function detectCategory(name) { const n = name.toLowerCase(); if (/(milch|wasser|kaffee|tee|saft|bier|wein|cola)/.test(n)) return 'Getränke'; if (/(brot|keks|kuchen|mehl|zucker)/.test(n)) return 'Backwaren'; if (/(apfel|banane|tomate|salat)/.test(n)) return 'Obst & Gemüse'; if (/(fleisch|wurst|schinken|hähnchen|fisch)/.test(n)) return 'Fleisch & Fisch'; if (/(käse|butter|joghurt)/.test(n)) return 'Milchprodukte'; if (/(reis|nudeln|gewürz)/.test(n)) return 'Vorrat'; return 'Allgemein'; }

function renderList() { const listEl = document.getElementById('list'); listEl.innerHTML = ''; categories.clear();

const filterFav = document.getElementById('filterFav').value; const filterCat = document.getElementById('filterCategory').value; const shown = list.filter(item => (filterFav !== 'favoriten' || favs.includes(item.name)) && (filterCat === 'alle' || item.category === filterCat) );

shown.sort((a,b)=>a.category.localeCompare(b.category)||a.name.localeCompare(b.name));

shown.forEach((item, i) => { categories.add(item.category); const div = document.createElement('div'); div.className = 'item'; div.innerHTML =  <div class="info" onclick="toggle(${i})"> <span class="item-name${item.checked ? ' checked' : ''}">${item.name} (${item.category}) x${item.qty}</span> </div> <div class="actions"> <button onclick="changeQty(${i}, -1)">−</button> <button onclick="changeQty(${i}, 1)">+</button> <button onclick="fav('${item.name}')">★</button> <button onclick="del(${i})">✖</button> </div>; listEl.appendChild(div); }); updateCategoryFilter(); }

function updateCategoryFilter() { const select = document.getElementById('filterCategory'); select.innerHTML = '<option value="alle">Alle Kategorien</option>'; [...categories].sort().forEach(cat => { const o = document.createElement('option'); o.value = o.textContent = cat; select.appendChild(o); }); }

function addItem() { const name = document.getElementById('itemInput').value.trim(); const cat = document.getElementById('categoryInput').value.trim() || detectCategory(name); if (!name) return; const existing = list.find(i => i.name === name); if (existing) existing.qty++; else list.push({ name, category: cat, qty: 1, checked: false }); save(); renderList(); }

function toggle(i) { list[i].checked = !list[i].checked; save(); renderList(); }

function changeQty(i, d) { list[i].qty += d; if (list[i].qty <= 0) list.splice(i, 1); save(); renderList(); }

function del(i) { if (confirm(${list[i].name} löschen?)) { list.splice(i, 1); save(); renderList(); } }

function fav(name) { if (!favs.includes(name)) favs.push(name); else favs = favs.filter(f => f !== name); save(); renderList(); }

function shareList() { const txt = list.map(i => ${i.checked ? '[x]' : '[ ]'} ${i.name} x${i.qty}).join('%0A'); window.open(https://wa.me/?text=Meine Einkaufsliste:%0A${encodeURIComponent(txt)}); }

function clearList() { if (confirm('Liste wirklich löschen?')) { list = []; save(); renderList(); } }

function exportList() { const blob = new Blob([JSON.stringify(list, null, 2)], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'einkaufsliste.json'; a.click(); URL.revokeObjectURL(url); }

function toggleDarkMode() { document.body.classList.toggle('dark'); }

renderList(); </script>

</body>
</html>
