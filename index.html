<!DOCTYPE html><html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Einkaufsliste</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1em;
      background-color: #f4f4f4;
      color: #333;
    }
    h1 { color: green; }
    .input-row { display: flex; gap: 1em; margin-bottom: 1em; }
    .input-row input, .input-row button { padding: 0.5em; font-size: 1em; }
    ul { list-style: none; padding: 0; }
    li { background: #fff; padding: 0.5em; margin-bottom: 0.5em; border-radius: 5px; display: flex; justify-content: space-between; }
    .category { font-size: 0.8em; color: #999; }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
  <h1>Einkaufsliste</h1>
  <div class="input-row">
    <input type="text" id="produktName" placeholder="Produktname">
    <input type="text" id="produktMenge" placeholder="Menge">
    <button onclick="hinzufuegen()">Hinzufügen</button>
  </div>
  <ul id="liste"></ul>  <script>
    // Firebase Konfiguration
    const firebaseConfig = {
      apiKey: "AIzaSyD7pocrD9_46QNoz1jrxggpzkL7E6IhetY",
      authDomain: "einkaufliste-cd5d3.firebaseapp.com",
      projectId: "einkaufliste-cd5d3",
      storageBucket: "einkaufliste-cd5d3.appspot.com",
      messagingSenderId: "36721747923",
      appId: "1:36721747923:web:dbe48ff974c80435eff126",
      measurementId: "G-37TDK0257N"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const listeRef = db.collection("einkaufslisten").doc("standardListe");

    async function laden() {
      const doc = await listeRef.get();
      if (doc.exists) {
        const daten = doc.data();
        zeigeListe(daten.eintraege || []);
      }
    }

    function zeigeListe(eintraege) {
      const ul = document.getElementById("liste");
      ul.innerHTML = "";
      eintraege.forEach((eintrag, index) => {
        const li = document.createElement("li");
        li.innerHTML = `<span>${eintrag.name} - ${eintrag.menge}</span> <span class='category'>${eintrag.kategorie || "Sonstiges"}</span>`;
        ul.appendChild(li);
      });
    }

    async function hinzufuegen() {
      const nameInput = document.getElementById("produktName");
      const mengeInput = document.getElementById("produktMenge");
      const name = nameInput.value.trim();
      const menge = mengeInput.value.trim() || "1";
      if (!name) return;

      const kat = bestimmeKategorie(name);
      const doc = await listeRef.get();
      const daten = doc.exists ? doc.data().eintraege || [] : [];

      daten.push({ name, menge, kategorie: kat });
      await listeRef.set({ eintraege: daten });

      nameInput.value = "";
      mengeInput.value = "";
      zeigeListe(daten);
    }

    function bestimmeKategorie(name) {
      const n = name.toLowerCase();
      if (n.includes("brot") || n.includes("bröt")) return "Backwaren";
      if (n.includes("milch") || n.includes("joghurt")) return "Milchprodukte";
      if (n.includes("wurst") || n.includes("schinken") || n.includes("aufschnitt")) return "Aufschnitt";
      if (n.includes("salat")) return "Salate";
      if (n.includes("hack") || n.includes("fleisch")) return "Fleisch";
      if (n.includes("bier") || n.includes("cola") || n.includes("saft")) return "Getränke";
      if (n.includes("eier")) return "Eier";
      return "Sonstiges";
    }

    laden();
  </script></body>
</html>
